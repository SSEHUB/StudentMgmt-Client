<ng-container *ngIf="(isLoading$ | async) == false">

	<table #tableUsers class="full-width" mat-table [dataSource]="dataSource" matSort #sortUsers="matSort">
		<!-- Action Column -->
		<ng-container matColumnDef="action">
			<th id="column-view" mat-header-cell *matHeaderCellDef></th>
			<td mat-cell *matCellDef="let row">
				<button mat-stroked-button color="primary" (click)="selectUser(row.user)">{{ 'Action.Select' | translate }}</button>
			</td>
		</ng-container>
	
		<!-- Name Column -->
		<ng-container matColumnDef="name">
			<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Domain.Participant' | translate }}</th>
			<td mat-cell *matCellDef="let row"> 
				<a class="link-none font-bold" [routerLink]="['/courses', courseId, 'users', row.user.id]">{{row.user.username}}</a>
			</td>
		</ng-container>
	
		<!-- Assigned evaluator Column -->
		<ng-container matColumnDef="assignedTo">
			<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Common.AssignedTo' | translate }}</th>
			<td mat-cell *matCellDef="let row">
				<app-assessment-allocation 
					[courseId]="courseId"
					[assignmentId]="assignmentId"
					[assignedTo]="row.assignedEvaluatorId"
					[userId]="row.user.id">
				</app-assessment-allocation>
			</td>
		</ng-container>
	
		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row [ngClass]="{'selected': row.user.id === selectedId }" *matRowDef="let row; columns: displayedColumns;">
		</tr>
	</table>
	
</ng-container>

<app-paginator (onPageChanged)="loadUsers()"></app-paginator>

<mat-progress-spinner class="center" mode="indeterminate" color="primary" *ngIf="isLoading$ | async"></mat-progress-spinner>
