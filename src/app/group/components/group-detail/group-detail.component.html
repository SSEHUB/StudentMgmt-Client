<div class="tab" id="group-detail-container" *ngIf="group">
	<mat-card-title>
		{{group.name}}
	</mat-card-title>

	<div id="group-members">
		<h2 class="heading">{{ 'Domain.Members' | translate }}</h2>
		<mat-list *ngIf="group.users.length > 0; else emptyGroupText" dense class="member-list">
			<mat-divider inset=true></mat-divider>
			<ng-container *ngFor="let user of group.users">
				<mat-list-item class="member-item">
					<a class="font-bold">{{user.username}}</a>
					<div class="member-buttons">
						<button mat-mini-fab color="primary" class="mat-elevation-z0" (click)="onPromoteToLeader(user)"><mat-icon>star</mat-icon></button>
						<button mat-mini-fab color="warn" class="mat-elevation-z0" (click)="onRemoveUser(user)"><mat-icon>clear</mat-icon></button>
					</div>
				</mat-list-item>
				<mat-divider inset=true></mat-divider>
			</ng-container>
		</mat-list>

		<ng-template #emptyGroupText>
			<p>This group has no members.</p>
		</ng-template>
	</div>

	<div id="group-history">
		<h2 class="heading">{{ 'Property.Group.History' | translate }}</h2>
		<mat-list class="history-list" dense *ngIf="group.history.length > 0; else emptyHistoryText">
			<mat-divider inset=true></mat-divider>
			<ng-container *ngFor="let event of group.history">
				<mat-list-item class="history-item" [class]="event.event === 'UserJoinedGroupEvent' ? 'green' : 'red'">
					<mat-icon class="text-green" *ngIf="event.event === 'UserJoinedGroupEvent'; else leftGroupIcon">add_box</mat-icon>
					<ng-template #leftGroupIcon>
						<mat-icon class="text-red" *ngIf="event.event === 'UserLeftGroupEvent'">indeterminate_check_box</mat-icon>
					</ng-template>
				<span>
					<span class="timestamp">[{{event.timestamp | date }}]:</span>
					<a class="font-bold">{{event.user.username}}</a>
					{{ "Event." + event.event | translate}}
				</span>
				</mat-list-item>
				<mat-divider inset=true></mat-divider>
			</ng-container>
		</mat-list>

		<ng-template #emptyHistoryText>
			<p>This group has no history.</p>
		</ng-template>
	</div>

	<div id="assessments">
		<h2 class="heading">{{ 'Domain.Assessments' | translate }}</h2>

		<table class="full-width" mat-table [dataSource]="dataSource" matSort>
			<!-- Assignment name Column -->
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Domain.Assignment' | translate }}</th>
				<td mat-cell *matCellDef="let row"> 
					<a class="link-none font-bold" [routerLink]="['/courses', group.course.semester, group.course.shortname , 'assignments', row.assignment.id]">
						{{row.assignment.name}}
					</a> 
				</td>
			</ng-container>

			<!-- Assignment Type Column -->
			<ng-container matColumnDef="type">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Property.Assignment.Type' | translate }}</th>
				<td mat-cell *matCellDef="let row">{{ row.assignment.type }}</td>
			</ng-container>

			<!-- Score Column -->
			<ng-container matColumnDef="score">
				<th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Property.Assessment.AchievedPoints' | translate }}</th>
				<td mat-cell *matCellDef="let row">{{ row.achievedPoints }}</td>
			</ng-container>

			<!-- Score Column -->
			<ng-container matColumnDef="action">
				<th mat-header-cell *matHeaderCellDef mat-sort-header></th>
				<td mat-cell *matCellDef="let row"></td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		</table>
	</div>

</div>
